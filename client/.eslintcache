[{"/Users/c/zotzen-web/zotzen-web-app/src/index.js":"1","/Users/c/zotzen-web/zotzen-web-app/src/App.js":"2","/Users/c/zotzen-web/zotzen-web-app/src/reportWebVitals.js":"3"},{"size":500,"mtime":1609414865327,"results":"4","hashOfConfig":"5"},{"size":1815,"mtime":1609417034779,"results":"6","hashOfConfig":"5"},{"size":362,"mtime":1609414865329,"results":"7","hashOfConfig":"5"},{"filePath":"8","messages":"9","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"isp4av",{"filePath":"11","messages":"12","errorCount":6,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"13"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"10"},"/Users/c/zotzen-web/zotzen-web-app/src/index.js",[],["16","17"],"/Users/c/zotzen-web/zotzen-web-app/src/App.js",["18","19","20","21","22","23","24","25"],"import logo from './logo.svg';\nimport './App.css';\nimport {GoogleLogin} from 'react-google-login'\nconst { OAuth2Client } = require('google-auth-library')\nconst client = new OAuth2Client(process.env.CLIENT_ID)\n\nserver.post(\"/api/v1/auth/google\", async (req, res) => {\n  const { token }  = req.body\n  const ticket = await client.verifyIdToken({\n      idToken: token,\n      audience: process.env.CLIENT_ID\n  });\n  const { name, email, picture } = ticket.getPayload();    \n  const user = await db.user.upsert({ \n      where: { email: email },\n      update: { name, picture },\n      create: { name, email, picture }\n  })\n  req.session.userId = user.id\n  res.status(201)\n  res.json(user)\n})\n\n// Check authentication middleware\n\nserver.use(async (req, res, next) => {\n  const user = await db.user.findFirst({where: { id:  req.session.userId }})\n  req.user = user\n  next()\n})\n\n// Sign out route\n\nserver.delete(\"/api/v1/auth/logout\", async (req, res) => {\n  await req.session.destroy()\n  res.status(200)\n  res.json({\n      message: \"Logged out successfully\"\n  })\n})\n\n// \"Me\" route\n\nserver.get(\"/me\", async (req, res) => {\n  res.status(200)\n  res.json(req.user)\n})\n\n\nconst handleLogin = async googleData => {\n  const res = await fetch(\"/api/v1/auth/google\", {\n      method: \"POST\",\n      body: JSON.stringify({\n      token: googleData.tokenId\n    }),\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  })\n  const data = await res.json()\n  // store returned user somehow\n}\n\nfunction App() {\n  return (\n    <div className=\"App\">\n     <h2>The Login Component</h2>\n     <GoogleLogin\n    clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\n    buttonText=\"Log in with Google\"\n    onSuccess={handleLogin}\n    onFailure={handleLogin}\n    cookiePolicy={'single_host_origin'}\n     />\n    </div>\n  );\n}\n\nexport default App;\n","/Users/c/zotzen-web/zotzen-web-app/src/reportWebVitals.js",[],{"ruleId":"26","replacedBy":"27"},{"ruleId":"28","replacedBy":"29"},{"ruleId":"30","severity":1,"message":"31","line":1,"column":8,"nodeType":"32","messageId":"33","endLine":1,"endColumn":12},{"ruleId":"34","severity":2,"message":"35","line":7,"column":1,"nodeType":"32","messageId":"36","endLine":7,"endColumn":7},{"ruleId":"34","severity":2,"message":"37","line":14,"column":22,"nodeType":"32","messageId":"36","endLine":14,"endColumn":24},{"ruleId":"34","severity":2,"message":"35","line":26,"column":1,"nodeType":"32","messageId":"36","endLine":26,"endColumn":7},{"ruleId":"34","severity":2,"message":"37","line":27,"column":22,"nodeType":"32","messageId":"36","endLine":27,"endColumn":24},{"ruleId":"34","severity":2,"message":"35","line":34,"column":1,"nodeType":"32","messageId":"36","endLine":34,"endColumn":7},{"ruleId":"34","severity":2,"message":"35","line":44,"column":1,"nodeType":"32","messageId":"36","endLine":44,"endColumn":7},{"ruleId":"30","severity":1,"message":"38","line":60,"column":9,"nodeType":"32","messageId":"33","endLine":60,"endColumn":13},"no-native-reassign",["39"],"no-negated-in-lhs",["40"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","no-undef","'server' is not defined.","undef","'db' is not defined.","'data' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]